window.__require=function t(e,o,r){function i(a,c){if(!o[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(n)return n(s,!0);throw new Error("Cannot find module '"+a+"'")}}var p=o[a]={exports:{}};e[a][0].call(p.exports,function(t){return i(e[a][1][t]||t)},p,p.exports,t,e,o,r)}return o[a].exports}for(var n="function"==typeof __require&&__require,a=0;a<r.length;a++)i(r[a]);return i}({Actor:[function(t,e,o){"use strict";cc._RF.push(e,"6126abk72dEgJg/eWqvKjnb","Actor"),Object.defineProperty(o,"__esModule",{value:!0});var r,i=t("./FloorTile"),n=cc._decorator,a=n.ccclass,c=n.property;(function(t){t[t.left=1]="left",t[t.right=2]="right",t[t.up=3]="up",t[t.down=4]="down"})(r||(r={}));var s=!0,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curTile=null,e.curAction=null,e}return __extends(e,t),e.prototype.start=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyUp,this)},e.prototype.moveOneStep=function(t){var e=this,o=this.getPosByWpos(t.WPos);this.node.stopAllActions(),s=!1,this.node.runAction(cc.sequence(cc.moveTo(.2,o),cc.callFunc(function(){e.curTile=t},this),cc.callFunc(this.onMoveFinish,this)))},e.prototype.onMoveFinish=function(){if(s=!0,null!=this.curAction)switch(this.curAction){case cc.macro.KEY.up:this.curTile.up&&this.moveOneStep(this.curTile.upTile);break;case cc.macro.KEY.down:this.curTile.down&&this.moveOneStep(this.curTile.downTile);break;case cc.macro.KEY.left:this.curTile.left&&this.moveOneStep(this.curTile.leftTile);break;case cc.macro.KEY.right:this.curTile.right&&this.moveOneStep(this.curTile.rightTile)}s&&this.node.emit("onstep")},e.prototype.getPosByWpos=function(t){return this.node.parent.convertToNodeSpaceAR(t)},e.prototype.onKeyDown=function(t){if(null==this.curAction&&s)switch(t.keyCode){case cc.macro.KEY.up:this.curAction=t.keyCode,this.curTile.up&&this.moveOneStep(this.curTile.upTile);break;case cc.macro.KEY.down:this.curAction=t.keyCode,this.curTile.down&&this.moveOneStep(this.curTile.downTile);break;case cc.macro.KEY.left:this.curAction=t.keyCode,this.curTile.left&&this.moveOneStep(this.curTile.leftTile);break;case cc.macro.KEY.right:this.curAction=t.keyCode,this.curTile.right&&this.moveOneStep(this.curTile.rightTile)}},e.prototype.onKeyUp=function(t){this.curAction==t.keyCode&&(this.curAction=null)},__decorate([c(i.default)],e.prototype,"curTile",void 0),e=__decorate([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./FloorTile":"FloorTile"}],FloorTile:[function(t,e,o){"use strict";cc._RF.push(e,"4f24bycc8RHO4Rr4Y4cC97Z","FloorTile"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,n=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lBorder=null,e.rBorder=null,e.uBorder=null,e.dBorder=null,e.flag=null,e._isStartTile=!1,e._isEndTile=!1,e.leftTile=null,e.rightTile=null,e.upTile=null,e.downTile=null,e._gridData=null,e.actor=null,e}return __extends(e,t),Object.defineProperty(e.prototype,"Size",{get:function(){return this.node.getContentSize()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WPos",{get:function(){return this.node.convertToWorldSpaceAR(cc.Vec2.ZERO)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WRect",{get:function(){var t=this.Size,e=this.WPos;return cc.rect(e.x-t.width/2,e.y-t.height/2,t.width,t.height)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isStartTile",{get:function(){return this._isStartTile},set:function(t){this._isStartTile=t,this.flag.active=t,t&&(this.flag.color=cc.Color.RED)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEndtTile",{get:function(){return this._isEndTile},set:function(t){this._isEndTile=t,this.flag.active=t,t&&(this.flag.color=cc.Color.YELLOW)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridData",{get:function(){return this._gridData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointer",{get:function(){return this._gridData.pointer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"h",{get:function(){return this.pointer.h},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"l",{get:function(){return this.pointer.l},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this._gridData.left},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this._gridData.right},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"up",{get:function(){return this._gridData.up},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"down",{get:function(){return this._gridData.down},enumerable:!0,configurable:!0}),e.prototype.initFloorTile=function(t,e){var o=this;this._gridData=t,this.lBorder.active=!t.left,this.rBorder.active=!t.right,this.uBorder.active=!t.up,this.dBorder.active=!t.down;var r=cc.rect(t.rect.x,t.rect.y,t.rect.width,t.rect.height);this.node.position=r.center,this.actor=e,this.actor.node.on("onstep",function(){var t=o.actor.node.convertToWorldSpaceAR(cc.Vec2.ZERO),e=o.WPos;Math.abs(e.x-t.x)>400||Math.abs(e.y-t.y)>400?o.node.active=!1:o.node.active=!0})},__decorate([n(cc.Node)],e.prototype,"lBorder",void 0),__decorate([n(cc.Node)],e.prototype,"rBorder",void 0),__decorate([n(cc.Node)],e.prototype,"uBorder",void 0),__decorate([n(cc.Node)],e.prototype,"dBorder",void 0),__decorate([n(cc.Node)],e.prototype,"flag",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],GameController:[function(t,e,o){"use strict";cc._RF.push(e,"c5bfar6LkBMDpacbCa/cJH9","GameController"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("../MazeMapProto"),i=t("./MapCtrl"),n=t("./Actor"),a=function(){function t(){}return t.init=function(){if(cc.sys.isBrowser);else{var t=jsb.fileUtils.getWritablePath();this._outDirPath=cc.path.join(t,this._dir),jsb.fileUtils.isDirectoryExist(this._outDirPath)||jsb.fileUtils.createDirectory(this._outDirPath)}},t.formatMapPath=function(t){return cc.path.join(this._outDirPath,"map_"+t+".mazemap")},t.loadMap=function(t,e){var o=this,i=this.maps[t.toString()];if(this.maps[t.toString()])return i;if(cc.sys.isBrowser){var n=cc.url.raw("resources/maps/map_"+t)+".mazemap";cc.loader.load({url:n,type:"binary"},function(n,a){n?console.error(n.message||n):(i=r.MapProto.FormatedMzData.decode(a),console.log(i),o.maps[t.toString()]=i,e(i))})}else{var a=this.formatMapPath(t);if(jsb.fileUtils.isFileExist(a)){var c=jsb.fileUtils.getDataFromFile(a);i=r.MapProto.FormatedMzData.decode(c),this.maps[t.toString()]=i,e(i)}else console.error("Have no map data",t)}},t._dir="MazeMapOut",t._outDirPath="",t.maps={},t}(),c=cc._decorator,s=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mapCtrl=null,e.actor=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;a.init(),a.loadMap(0,function(e){t.mapCtrl.setMap(e),t.actor.node.position=t.actor.node.parent.convertToNodeSpaceAR(t.mapCtrl.startWordPos),t.actor.curTile=t.mapCtrl.startFoorTile,t.actor.node.emit("onstep")})},e.prototype.start=function(){},__decorate([l(i.default)],e.prototype,"mapCtrl",void 0),__decorate([l(n.default)],e.prototype,"actor",void 0),e=__decorate([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../MazeMapProto":"MazeMapProto","./Actor":"Actor","./MapCtrl":"MapCtrl"}],MZControl:[function(t,e,o){"use strict";cc._RF.push(e,"488ec+Df01P94o2v7SJbnbz","MZControl"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,n=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.flagPfb=null,e.tile=null,e._mzData=null,e._mzSize=null,e._startFlag=null,e._endFlag=null,e}return __extends(e,t),e.prototype.start=function(){this._mzData&&this.drawMap()},e.prototype.setMap=function(t){this._mzData=t,this.node.width=this._mzData.MapSize.width,this.node.height=this._mzData.MapSize.height},e.prototype.fillRect=function(t){var e=this.node.convertToNodeSpaceAR(t);this._mzData.fillMapRect(e)&&(this._mzData.calcData(),this.drawMap())},e.prototype.unFillRect=function(t){var e=this.node.convertToNodeSpaceAR(t);this._mzData.unFillMapRect(e)&&(this._mzData.calcData(),this.drawMap())},e.prototype.setStartFlag=function(t){var e=this.node.convertToNodeSpaceAR(t);this._mzData.setStartPointer(e)&&this.drawMap()},e.prototype.setEndFlag=function(t){var e=this.node.convertToNodeSpaceAR(t);this._mzData.setEndPointer(e)&&this.drawMap()},e.prototype.getGrideInfo=function(t){var e=this.node.convertToNodeSpaceAR(t);return this._mzData.getMZGridInfo(e)},e.prototype.drawMap=function(){this.node.destroyAllChildren();for(var t=this._mzData.getRects(),e=0;e<t.length;e++)for(var o=t[e],r=0;r<o.length;r++){var i=o[r];i.x-=this._mzData.MapSize.width/2,i.y-=this._mzData.MapSize.height/2;var n={h:e,l:r};if(this._mzData.isGridValid(n)){var a=cc.instantiate(this.tile);a.parent=this.node,a.position=i.center}this._mzData.isStart(n)&&this.showFlag("start",i),this._mzData.isEnd(n)&&this.showFlag("end",i)}},e.prototype.showFlag=function(t,e){switch(t){case"start":(o=cc.instantiate(this.flagPfb)).parent=this.node,o.position=e.center,o.color=cc.Color.GREEN;break;case"end":var o;(o=cc.instantiate(this.flagPfb)).parent=this.node,o.position=e.center,o.color=cc.Color.YELLOW}},__decorate([n(cc.Prefab)],e.prototype,"flagPfb",void 0),__decorate([n(cc.Prefab)],e.prototype,"tile",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],MZMapData:[function(t,e,o){"use strict";cc._RF.push(e,"a1e63e9y9JJuJ41gcAhKHB5","MZMapData"),Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function t(t,e){if(this._mapSize=null,this._mzSize=null,this._map=null,this._gridSize=null,this._startPointer=null,this._endPointer=null,t instanceof cc.Size){this._mapSize=t,this._mzSize=e,this._gridSize=cc.size(this._mapSize.width/this._mzSize.l,this._mapSize.height/this._mzSize.h),this._map=[];for(var o=0;o<this._mzSize.h;o++){for(var r=[],i=0;i<this._mzSize.l;i++)r.push({rect:cc.rect(i*this._gridSize.width,o*this._gridSize.height,this._gridSize.width,this._gridSize.height),left:!1,right:!1,up:!1,down:!1,valid:!1,pointer:{h:o,l:i}});this._map.push(r)}}else{var n=t;this._mapSize=n.mapSize,this._mzSize=n.mazeSize,this._gridSize=n.grideSize,this._startPointer=n.startPointer,this._endPointer=n.endPointer,this._map=[];for(o=0;o<this._mzSize.h;o++){for(r=[],i=0;i<this._mzSize.l;i++)r.push({rect:cc.rect(i*this._gridSize.width,o*this._gridSize.height,this._gridSize.width,this._gridSize.height),left:!1,right:!1,up:!1,down:!1,valid:!1,pointer:{h:o,l:i}});this._map.push(r)}for(var a=0;a<n.mapData.length;a++){var c=n.mapData[a];this._map[c.pointer.h][c.pointer.l]=c}}}return Object.defineProperty(t.prototype,"MapSize",{get:function(){return this._mapSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MzSize",{get:function(){return this._mzSize},enumerable:!0,configurable:!0}),t.prototype.validMapRect=function(t){return t.h<this._map.length?t.l<this._map[t.h].length?0==this._map[t.h][t.l].valid&&(this._map[t.h][t.l].valid=!0,!0):(console.error("pointer.l out of the range"),!1):(console.error("pointer.h out of the range"),!1)},t.prototype.unValidMapRect=function(t){return t.h<this._map.length?t.l<this._map[t.h].length?1==this._map[t.h][t.l].valid&&(this._map[t.h][t.l].valid=!1,!0):(console.error("pointer.l out of the range"),!1):(console.error("pointer.h out of the range"),!1)},t.prototype.isGridValid=function(t){return t.h<this._map.length?t.l<this._map[t.h].length?this._map[t.h][t.l].valid:(console.error("pointer.l out of the range"),!1):(console.error("pointer.h out of the range"),!1)},t.prototype.calcMZPointer=function(t){var e=cc.v2(t.x+this._mapSize.width/2,t.y+this._mapSize.height/2);return{h:Math.floor(e.y/this._gridSize.height),l:Math.floor(e.x/this._gridSize.width)}},t.prototype.getRects=function(){for(var t=[],e=0;e<this._map.length;e++){for(var o=this._map[e],r=[],i=0;i<o.length;i++){var n=o[i];r.push(cc.rect(n.rect.x,n.rect.y,n.rect.width,n.rect.height))}t.push(r)}return t},t.prototype.fillMapRect=function(t){var e=this.calcMZPointer(t);return!this.isGridValid(e)&&this.validMapRect(e)},t.prototype.unFillMapRect=function(t){var e=this.calcMZPointer(t);return!!this.isGridValid(e)&&this.unValidMapRect(e)},t.prototype.getMZGridInfo=function(t){var e=this.calcMZPointer(t);return e.h<this._map.length?e.l<this._map[e.h].length?JSON.stringify(this._map[e.h][e.l],null,"  "):(console.error("pointer.l out of the range"),"false"):(console.error("pointer.h out of the range"),"false")},t.prototype.calcData=function(){for(var t=0;t<this._map.length;t++)for(var e=this._map[t],o=0;o<e.length;o++){var r=e[o];t<this._map.length-1&&(r.up=this._map[t+1][o].valid),t>0&&(r.down=this._map[t-1][o].valid),o<e.length-1&&(r.right=this._map[t][o+1].valid),o>0&&(r.left=this._map[t][o-1].valid)}},t.prototype.setStartPointer=function(t){var e=this.calcMZPointer(t);return this.isGridValid(e)?this._startPointer?this.isStart(e)?(this._startPointer=null,!0):(console.error("the startPointer is allready exist",this._startPointer),!1):(this._startPointer=e,!0):(console.error("the grid is unvalid"),!1)},t.prototype.setEndPointer=function(t){var e=this.calcMZPointer(t);return this.isGridValid(e)?this._endPointer?this.isEnd(e)?(this._endPointer=null,!0):(console.error("the startPointer is allready exist",this._endPointer),!1):(this._endPointer=e,!0):(console.error("the grid is unvalid"),!1)},t.prototype.isStart=function(t){return!!this._startPointer&&(this._startPointer.h==t.h&&this._startPointer.l==t.l)},t.prototype.isEnd=function(t){return!!this._endPointer&&(this._endPointer.h==t.h&&this._endPointer.l==t.l)},t.prototype.formatMZData=function(){for(var t=[],e=0;e<this._map.length;e++)for(var o=this._map[e],r=0;r<o.length;r++)1==o[r].valid&&t.push(o[r]);if(this._startPointer){if(this._endPointer)return{mapSize:this._mapSize,mazeSize:this._mzSize,grideSize:this._gridSize,mapData:t,startPointer:this._startPointer,endPointer:this._endPointer};console.error("\u672a\u8bbe\u7f6e\u7ed3\u675f\u70b9")}else console.error("\u672a\u8bbe\u7f6e\u5f00\u59cb\u70b9")},t}();o.MZData=r,cc._RF.pop()},{}],MainScene:[function(t,e,o){"use strict";cc._RF.push(e,"008e8/ejA5OyoCP/rxXMLiQ","MainScene"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Menu"),i=t("./MZControl"),n=cc._decorator,a=n.ccclass,c=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mapPfb=null,e.mapBgNode=null,e.menu=null,e.infoBg=null,e.infoLab=null,e._mapNode=null,e._operation=null,e._touchStartPos=null,e._initMapPos=null,e}return __extends(e,t),e.prototype.start=function(){this.initScene()},e.prototype.initScene=function(){var t=this;cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){if(cc.isValid(t._mapNode))switch(e.keyCode){case cc.macro.KEY.space:t._operation="move";break;case cc.macro.KEY.d:t._operation="draw";break;case cc.macro.KEY.Delete:t._operation="delete";break;case cc.macro.KEY.i:t._operation="info";break;case cc.macro.KEY.s:t._operation="set_start";break;case cc.macro.KEY.e:t._operation="set_end";break;case cc.macro.KEY["+"]:t._mapNode.scale*=1.1,t.mapBgNode.scale=t._mapNode.scale;break;case cc.macro.KEY["-"]:t._mapNode.scale*=.9,t.mapBgNode.scale=t._mapNode.scale;break;case cc.macro.KEY.home:t._mapNode.scale=1,t.mapBgNode.scale=t._mapNode.scale;break;case cc.macro.KEY.up:t._mapNode.y+=10,t.mapBgNode.y=t._mapNode.y;break;case cc.macro.KEY.down:t._mapNode.y-=10,t.mapBgNode.y=t._mapNode.y;break;case cc.macro.KEY.left:t._mapNode.x-=10,t.mapBgNode.x=t._mapNode.x;break;case cc.macro.KEY.right:t._mapNode.x+=10,t.mapBgNode.x=t._mapNode.x}switch(e.keyCode){case cc.macro.KEY.m:t.menu.node.active?(t.menu.hide(),t.showMap()):(t.menu.show(),t.hideMap(),t._mapNode.scale=1,t.mapBgNode.scale=t._mapNode.scale);break;case cc.macro.KEY.pageup:t.menu.pageUp();break;case cc.macro.KEY.pagedown:t.menu.pageDown()}}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(e){if(cc.isValid(t._mapNode))switch(e.keyCode){case cc.macro.KEY.space:case cc.macro.KEY.d:case cc.macro.KEY.Delete:t._operation=null;break;case cc.macro.KEY.i:t._operation=null,t.infoBg.active=!1}}),this.node.on(cc.Node.EventType.TOUCH_START,function(e){if(cc.isValid(t._mapNode)){var o=e.getLocation(),r=t._mapNode.getComponent(i.default);switch(t._operation){case"move":t._touchStartPos=e.getLocation(),t._initMapPos=cc.v2(t._mapNode.position.x,t._mapNode.position.y);break;case"draw":t._mapNode.getBoundingBoxToWorld().contains(o)&&r.fillRect(o);break;case"delete":t._mapNode.getBoundingBoxToWorld().contains(o)&&r.unFillRect(o);break;case"info":t.infoBg.active=!0,t.infoLab.string=r.getGrideInfo(o);break;case"set_start":r.setStartFlag(o);break;case"set_end":r.setEndFlag(o)}}}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){if(cc.isValid(t._mapNode)){var o=e.getLocation();switch(t._operation){case"move":var r=o.sub(t._touchStartPos);t._mapNode.position=t._initMapPos.add(r),t.mapBgNode.position=t._mapNode.position;break;case"draw":var n=t._mapNode.getComponent(i.default);(a=t._mapNode.getBoundingBoxToWorld()).contains(o)&&n.fillRect(o);break;case"delete":n=t._mapNode.getComponent(i.default);var a=t._mapNode.getBoundingBoxToWorld(),c=e.getLocation();a.contains(c)&&n.unFillRect(c)}}}),this.node.on(cc.Node.EventType.TOUCH_END,function(e){if(cc.isValid(t._mapNode))switch(t._operation){case"move":t._touchStartPos=null,t._initMapPos=null;break;case"draw":break;case"info":t.infoBg.active=!1}}),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){if(cc.isValid(t._mapNode))switch(t._operation){case"move":t._touchStartPos=null,t._initMapPos=null;break;case"draw":break;case"info":t.infoBg.active=!1}})},e.prototype.newMap=function(t){cc.isValid(this._mapNode)&&this._mapNode.destroy(),this._mapNode=cc.instantiate(this.mapPfb),this._mapNode.parent=this.node,this._mapNode.position=cc.Vec2.ZERO,this._mapNode.getComponent(i.default).setMap(t.Data),this.mapBgNode.active=!0,this.mapBgNode.position=this._mapNode.position,this.mapBgNode.width=this._mapNode.width,this.mapBgNode.height=this._mapNode.height},e.prototype.hideMap=function(){cc.isValid(this._mapNode)&&(this._mapNode.active=!1),this.mapBgNode.active=!1},e.prototype.showMap=function(){cc.isValid(this._mapNode)&&(this._mapNode.active=!0),this.mapBgNode.active=!0},__decorate([c(cc.Prefab)],e.prototype,"mapPfb",void 0),__decorate([c(cc.Node)],e.prototype,"mapBgNode",void 0),__decorate([c(r.default)],e.prototype,"menu",void 0),__decorate([c(cc.Node)],e.prototype,"infoBg",void 0),__decorate([c(cc.Label)],e.prototype,"infoLab",void 0),e=__decorate([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./MZControl":"MZControl","./Menu":"Menu"}],MapCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"dd947mNW5VOsqDQxoRs6S3i","MapCtrl"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./FloorTile"),i=t("./Actor"),n=cc._decorator,a=n.ccclass,c=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tilePfb=null,e.actor=null,e.tilePool=null,e._startWordPos=null,e._mzData=null,e.tileArr=null,e}return __extends(e,t),Object.defineProperty(e.prototype,"startWordPos",{get:function(){return this._startWordPos},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mapSize",{get:function(){return new cc.Size(this._mzData.mapSize.width,this._mzData.mapSize.height)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mazeSize",{get:function(){return this._mzData.mazeSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grideSize",{get:function(){return new cc.Size(this._mzData.grideSize.width,this._mzData.grideSize.height)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startPointer",{get:function(){return this._mzData.startPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPointer",{get:function(){return this._mzData.endPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mapData",{get:function(){return this._mzData.mapData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startFoorTile",{get:function(){return this.tileArr[this.startPointer.h][this.startPointer.l]},enumerable:!0,configurable:!0}),e.prototype.setMap=function(t){this._mzData=t,this.node.width=this.mapSize.width,this.node.height=this.mapSize.height,this.drawMap()},e.prototype.resetTileArr=function(){this.tileArr=[];for(var t=0;t<this.mazeSize.h;t++){for(var e=[],o=0;o<this.mazeSize.l;o++)e.push(null);this.tileArr.push(e)}},e.prototype.drawMap=function(){this.node.destroyAllChildren(),this.resetTileArr();for(var t=this.mapData,e=0;e<t.length;e++){var o=t[e];o.valid&&this.makerOneTile(o)}for(var r=0;r<this.tileArr.length;r++)for(var i=this.tileArr[r],n=0;n<i.length;n++){var a=i[n];a&&(a.left&&(a.leftTile=this.tileArr[r][n-1]),a.right&&(a.rightTile=this.tileArr[r][n+1]),a.up&&(a.upTile=this.tileArr[r+1][n]),a.down&&(a.downTile=this.tileArr[r-1][n]))}},e.prototype.makerOneTile=function(t){null==this.tilePool&&(this.tilePool=new cc.NodePool);var e=null;(e=this.tilePool.size()>0?this.tilePool.get():cc.instantiate(this.tilePfb)).parent=this.node;var o=e.getComponent(r.default);o.initFloorTile(t,this.actor);var i=t.pointer.h==this.startPointer.h&&t.pointer.l==this.startPointer.l,n=t.pointer.h==this.endPointer.h&&t.pointer.l==this.endPointer.l;return i?(o.isStartTile=!0,this._startWordPos=e.convertToWorldSpaceAR(cc.v2(0,0))):n&&(o.isEndtTile=!0),this.tileArr[t.pointer.h][t.pointer.l]=o,e},__decorate([c(cc.Prefab)],e.prototype,"tilePfb",void 0),__decorate([c(i.default)],e.prototype,"actor",void 0),e=__decorate([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./Actor":"Actor","./FloorTile":"FloorTile"}],MazeMapProto:[function(t,e,o){"use strict";cc._RF.push(e,"68ea1TVpdVPKqT+Hk0ktkRa","MazeMapProto");var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=protobuf,n=i.Reader,a=i.Writer,c=i.util,s=i.roots.default||(i.roots.default={});s.MapProto=function(){var t={};return t.Rect=function(){function t(t){if(t)for(var e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}return t.prototype.x=0,t.prototype.y=0,t.prototype.width=0,t.prototype.height=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=a.create()),e.uint32(8).uint32(t.x),e.uint32(16).uint32(t.y),e.uint32(24).uint32(t.width),e.uint32(32).uint32(t.height),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var o=void 0===e?t.len:t.pos+e,r=new s.MapProto.Rect;t.pos<o;){var i=t.uint32();switch(i>>>3){case 1:r.x=t.uint32();break;case 2:r.y=t.uint32();break;case 3:r.width=t.uint32();break;case 4:r.height=t.uint32();break;default:t.skipType(7&i)}}if(!r.hasOwnProperty("x"))throw c.ProtocolError("missing required 'x'",{instance:r});if(!r.hasOwnProperty("y"))throw c.ProtocolError("missing required 'y'",{instance:r});if(!r.hasOwnProperty("width"))throw c.ProtocolError("missing required 'width'",{instance:r});if(!r.hasOwnProperty("height"))throw c.ProtocolError("missing required 'height'",{instance:r});return r},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!==(void 0===t?"undefined":r(t))||null===t?"object expected":c.isInteger(t.x)?c.isInteger(t.y)?c.isInteger(t.width)?c.isInteger(t.height)?null:"height: integer expected":"width: integer expected":"y: integer expected":"x: integer expected"},t.fromObject=function(t){if(t instanceof s.MapProto.Rect)return t;var e=new s.MapProto.Rect;return null!=t.x&&(e.x=t.x>>>0),null!=t.y&&(e.y=t.y>>>0),null!=t.width&&(e.width=t.width>>>0),null!=t.height&&(e.height=t.height>>>0),e},t.toObject=function(t,e){e||(e={});var o={};return e.defaults&&(o.x=0,o.y=0,o.width=0,o.height=0),null!=t.x&&t.hasOwnProperty("x")&&(o.x=t.x),null!=t.y&&t.hasOwnProperty("y")&&(o.y=t.y),null!=t.width&&t.hasOwnProperty("width")&&(o.width=t.width),null!=t.height&&t.hasOwnProperty("height")&&(o.height=t.height),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),t.Size=function(){function t(t){if(t)for(var e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}return t.prototype.width=0,t.prototype.height=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=a.create()),e.uint32(8).uint32(t.width),e.uint32(16).uint32(t.height),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var o=void 0===e?t.len:t.pos+e,r=new s.MapProto.Size;t.pos<o;){var i=t.uint32();switch(i>>>3){case 1:r.width=t.uint32();break;case 2:r.height=t.uint32();break;default:t.skipType(7&i)}}if(!r.hasOwnProperty("width"))throw c.ProtocolError("missing required 'width'",{instance:r});if(!r.hasOwnProperty("height"))throw c.ProtocolError("missing required 'height'",{instance:r});return r},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!==(void 0===t?"undefined":r(t))||null===t?"object expected":c.isInteger(t.width)?c.isInteger(t.height)?null:"height: integer expected":"width: integer expected"},t.fromObject=function(t){if(t instanceof s.MapProto.Size)return t;var e=new s.MapProto.Size;return null!=t.width&&(e.width=t.width>>>0),null!=t.height&&(e.height=t.height>>>0),e},t.toObject=function(t,e){e||(e={});var o={};return e.defaults&&(o.width=0,o.height=0),null!=t.width&&t.hasOwnProperty("width")&&(o.width=t.width),null!=t.height&&t.hasOwnProperty("height")&&(o.height=t.height),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),t.MZSize=function(){function t(t){if(t)for(var e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}return t.prototype.h=0,t.prototype.l=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=a.create()),e.uint32(8).uint32(t.h),e.uint32(16).uint32(t.l),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var o=void 0===e?t.len:t.pos+e,r=new s.MapProto.MZSize;t.pos<o;){var i=t.uint32();switch(i>>>3){case 1:r.h=t.uint32();break;case 2:r.l=t.uint32();break;default:t.skipType(7&i)}}if(!r.hasOwnProperty("h"))throw c.ProtocolError("missing required 'h'",{instance:r});if(!r.hasOwnProperty("l"))throw c.ProtocolError("missing required 'l'",{instance:r});return r},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!==(void 0===t?"undefined":r(t))||null===t?"object expected":c.isInteger(t.h)?c.isInteger(t.l)?null:"l: integer expected":"h: integer expected"},t.fromObject=function(t){if(t instanceof s.MapProto.MZSize)return t;var e=new s.MapProto.MZSize;return null!=t.h&&(e.h=t.h>>>0),null!=t.l&&(e.l=t.l>>>0),e},t.toObject=function(t,e){e||(e={});var o={};return e.defaults&&(o.h=0,o.l=0),null!=t.h&&t.hasOwnProperty("h")&&(o.h=t.h),null!=t.l&&t.hasOwnProperty("l")&&(o.l=t.l),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),t.MZPointer=function(){function t(t){if(t)for(var e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}return t.prototype.h=0,t.prototype.l=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=a.create()),e.uint32(8).uint32(t.h),e.uint32(16).uint32(t.l),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var o=void 0===e?t.len:t.pos+e,r=new s.MapProto.MZPointer;t.pos<o;){var i=t.uint32();switch(i>>>3){case 1:r.h=t.uint32();break;case 2:r.l=t.uint32();break;default:t.skipType(7&i)}}if(!r.hasOwnProperty("h"))throw c.ProtocolError("missing required 'h'",{instance:r});if(!r.hasOwnProperty("l"))throw c.ProtocolError("missing required 'l'",{instance:r});return r},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!==(void 0===t?"undefined":r(t))||null===t?"object expected":c.isInteger(t.h)?c.isInteger(t.l)?null:"l: integer expected":"h: integer expected"},t.fromObject=function(t){if(t instanceof s.MapProto.MZPointer)return t;var e=new s.MapProto.MZPointer;return null!=t.h&&(e.h=t.h>>>0),null!=t.l&&(e.l=t.l>>>0),e},t.toObject=function(t,e){e||(e={});var o={};return e.defaults&&(o.h=0,o.l=0),null!=t.h&&t.hasOwnProperty("h")&&(o.h=t.h),null!=t.l&&t.hasOwnProperty("l")&&(o.l=t.l),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),t.MZGrid=function(){function t(t){if(t)for(var e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}return t.prototype.rect=null,t.prototype.left=!1,t.prototype.right=!1,t.prototype.up=!1,t.prototype.down=!1,t.prototype.valid=!1,t.prototype.pointer=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=a.create()),s.MapProto.Rect.encode(t.rect,e.uint32(10).fork()).ldelim(),e.uint32(16).bool(t.left),e.uint32(24).bool(t.right),e.uint32(32).bool(t.up),e.uint32(40).bool(t.down),e.uint32(48).bool(t.valid),s.MapProto.MZPointer.encode(t.pointer,e.uint32(58).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var o=void 0===e?t.len:t.pos+e,r=new s.MapProto.MZGrid;t.pos<o;){var i=t.uint32();switch(i>>>3){case 1:r.rect=s.MapProto.Rect.decode(t,t.uint32());break;case 2:r.left=t.bool();break;case 3:r.right=t.bool();break;case 4:r.up=t.bool();break;case 5:r.down=t.bool();break;case 6:r.valid=t.bool();break;case 7:r.pointer=s.MapProto.MZPointer.decode(t,t.uint32());break;default:t.skipType(7&i)}}if(!r.hasOwnProperty("rect"))throw c.ProtocolError("missing required 'rect'",{instance:r});if(!r.hasOwnProperty("left"))throw c.ProtocolError("missing required 'left'",{instance:r});if(!r.hasOwnProperty("right"))throw c.ProtocolError("missing required 'right'",{instance:r});if(!r.hasOwnProperty("up"))throw c.ProtocolError("missing required 'up'",{instance:r});if(!r.hasOwnProperty("down"))throw c.ProtocolError("missing required 'down'",{instance:r});if(!r.hasOwnProperty("valid"))throw c.ProtocolError("missing required 'valid'",{instance:r});if(!r.hasOwnProperty("pointer"))throw c.ProtocolError("missing required 'pointer'",{instance:r});return r},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!==(void 0===t?"undefined":r(t))||null===t?"object expected":(e=s.MapProto.Rect.verify(t.rect))?"rect."+e:"boolean"!=typeof t.left?"left: boolean expected":"boolean"!=typeof t.right?"right: boolean expected":"boolean"!=typeof t.up?"up: boolean expected":"boolean"!=typeof t.down?"down: boolean expected":"boolean"!=typeof t.valid?"valid: boolean expected":(e=s.MapProto.MZPointer.verify(t.pointer))?"pointer."+e:null;var e},t.fromObject=function(t){if(t instanceof s.MapProto.MZGrid)return t;var e=new s.MapProto.MZGrid;if(null!=t.rect){if("object"!==r(t.rect))throw TypeError(".MapProto.MZGrid.rect: object expected");e.rect=s.MapProto.Rect.fromObject(t.rect)}if(null!=t.left&&(e.left=Boolean(t.left)),null!=t.right&&(e.right=Boolean(t.right)),null!=t.up&&(e.up=Boolean(t.up)),null!=t.down&&(e.down=Boolean(t.down)),null!=t.valid&&(e.valid=Boolean(t.valid)),null!=t.pointer){if("object"!==r(t.pointer))throw TypeError(".MapProto.MZGrid.pointer: object expected");e.pointer=s.MapProto.MZPointer.fromObject(t.pointer)}return e},t.toObject=function(t,e){e||(e={});var o={};return e.defaults&&(o.rect=null,o.left=!1,o.right=!1,o.up=!1,o.down=!1,o.valid=!1,o.pointer=null),null!=t.rect&&t.hasOwnProperty("rect")&&(o.rect=s.MapProto.Rect.toObject(t.rect,e)),null!=t.left&&t.hasOwnProperty("left")&&(o.left=t.left),null!=t.right&&t.hasOwnProperty("right")&&(o.right=t.right),null!=t.up&&t.hasOwnProperty("up")&&(o.up=t.up),null!=t.down&&t.hasOwnProperty("down")&&(o.down=t.down),null!=t.valid&&t.hasOwnProperty("valid")&&(o.valid=t.valid),null!=t.pointer&&t.hasOwnProperty("pointer")&&(o.pointer=s.MapProto.MZPointer.toObject(t.pointer,e)),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),t.FormatedMzData=function(){function t(t){if(this.mapData=[],t)for(var e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}return t.prototype.mapSize=null,t.prototype.mazeSize=null,t.prototype.grideSize=null,t.prototype.mapData=c.emptyArray,t.prototype.startPointer=null,t.prototype.endPointer=null,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=a.create()),s.MapProto.Size.encode(t.mapSize,e.uint32(10).fork()).ldelim(),s.MapProto.MZSize.encode(t.mazeSize,e.uint32(18).fork()).ldelim(),s.MapProto.Size.encode(t.grideSize,e.uint32(26).fork()).ldelim(),null!=t.mapData&&t.mapData.length)for(var o=0;o<t.mapData.length;++o)s.MapProto.MZGrid.encode(t.mapData[o],e.uint32(34).fork()).ldelim();return s.MapProto.MZPointer.encode(t.startPointer,e.uint32(42).fork()).ldelim(),s.MapProto.MZPointer.encode(t.endPointer,e.uint32(50).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var o=void 0===e?t.len:t.pos+e,r=new s.MapProto.FormatedMzData;t.pos<o;){var i=t.uint32();switch(i>>>3){case 1:r.mapSize=s.MapProto.Size.decode(t,t.uint32());break;case 2:r.mazeSize=s.MapProto.MZSize.decode(t,t.uint32());break;case 3:r.grideSize=s.MapProto.Size.decode(t,t.uint32());break;case 4:r.mapData&&r.mapData.length||(r.mapData=[]),r.mapData.push(s.MapProto.MZGrid.decode(t,t.uint32()));break;case 5:r.startPointer=s.MapProto.MZPointer.decode(t,t.uint32());break;case 6:r.endPointer=s.MapProto.MZPointer.decode(t,t.uint32());break;default:t.skipType(7&i)}}if(!r.hasOwnProperty("mapSize"))throw c.ProtocolError("missing required 'mapSize'",{instance:r});if(!r.hasOwnProperty("mazeSize"))throw c.ProtocolError("missing required 'mazeSize'",{instance:r});if(!r.hasOwnProperty("grideSize"))throw c.ProtocolError("missing required 'grideSize'",{instance:r});if(!r.hasOwnProperty("startPointer"))throw c.ProtocolError("missing required 'startPointer'",{instance:r});if(!r.hasOwnProperty("endPointer"))throw c.ProtocolError("missing required 'endPointer'",{instance:r});return r},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!==(void 0===t?"undefined":r(t))||null===t)return"object expected";if(o=s.MapProto.Size.verify(t.mapSize))return"mapSize."+o;if(o=s.MapProto.MZSize.verify(t.mazeSize))return"mazeSize."+o;if(o=s.MapProto.Size.verify(t.grideSize))return"grideSize."+o;if(null!=t.mapData&&t.hasOwnProperty("mapData")){if(!Array.isArray(t.mapData))return"mapData: array expected";for(var e=0;e<t.mapData.length;++e){var o;if(o=s.MapProto.MZGrid.verify(t.mapData[e]))return"mapData."+o}}return(o=s.MapProto.MZPointer.verify(t.startPointer))?"startPointer."+o:(o=s.MapProto.MZPointer.verify(t.endPointer))?"endPointer."+o:null},t.fromObject=function(t){if(t instanceof s.MapProto.FormatedMzData)return t;var e=new s.MapProto.FormatedMzData;if(null!=t.mapSize){if("object"!==r(t.mapSize))throw TypeError(".MapProto.FormatedMzData.mapSize: object expected");e.mapSize=s.MapProto.Size.fromObject(t.mapSize)}if(null!=t.mazeSize){if("object"!==r(t.mazeSize))throw TypeError(".MapProto.FormatedMzData.mazeSize: object expected");e.mazeSize=s.MapProto.MZSize.fromObject(t.mazeSize)}if(null!=t.grideSize){if("object"!==r(t.grideSize))throw TypeError(".MapProto.FormatedMzData.grideSize: object expected");e.grideSize=s.MapProto.Size.fromObject(t.grideSize)}if(t.mapData){if(!Array.isArray(t.mapData))throw TypeError(".MapProto.FormatedMzData.mapData: array expected");e.mapData=[];for(var o=0;o<t.mapData.length;++o){if("object"!==r(t.mapData[o]))throw TypeError(".MapProto.FormatedMzData.mapData: object expected");e.mapData[o]=s.MapProto.MZGrid.fromObject(t.mapData[o])}}if(null!=t.startPointer){if("object"!==r(t.startPointer))throw TypeError(".MapProto.FormatedMzData.startPointer: object expected");e.startPointer=s.MapProto.MZPointer.fromObject(t.startPointer)}if(null!=t.endPointer){if("object"!==r(t.endPointer))throw TypeError(".MapProto.FormatedMzData.endPointer: object expected");e.endPointer=s.MapProto.MZPointer.fromObject(t.endPointer)}return e},t.toObject=function(t,e){e||(e={});var o={};if((e.arrays||e.defaults)&&(o.mapData=[]),e.defaults&&(o.mapSize=null,o.mazeSize=null,o.grideSize=null,o.startPointer=null,o.endPointer=null),null!=t.mapSize&&t.hasOwnProperty("mapSize")&&(o.mapSize=s.MapProto.Size.toObject(t.mapSize,e)),null!=t.mazeSize&&t.hasOwnProperty("mazeSize")&&(o.mazeSize=s.MapProto.MZSize.toObject(t.mazeSize,e)),null!=t.grideSize&&t.hasOwnProperty("grideSize")&&(o.grideSize=s.MapProto.Size.toObject(t.grideSize,e)),t.mapData&&t.mapData.length){o.mapData=[];for(var r=0;r<t.mapData.length;++r)o.mapData[r]=s.MapProto.MZGrid.toObject(t.mapData[r],e)}return null!=t.startPointer&&t.hasOwnProperty("startPointer")&&(o.startPointer=s.MapProto.MZPointer.toObject(t.startPointer,e)),null!=t.endPointer&&t.hasOwnProperty("endPointer")&&(o.endPointer=s.MapProto.MZPointer.toObject(t.endPointer,e)),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),t}(),e.exports=s,cc._RF.pop()},{}],Menu:[function(t,e,o){"use strict";cc._RF.push(e,"5a8e0PqmHdChYU59SpSKEXZ","Menu"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./MZMapData"),i=t("../MazeMapProto"),n=t("./ScrollItem"),a=t("./MainScene"),c=cc.size(100,100),s=cc._decorator,l=s.ccclass,p=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cell=null,e.sc=null,e.mainScene=null,e._outDirPath=null,e}return __extends(e,t),e.prototype.initDir=function(){var t=jsb.fileUtils.getWritablePath();this._outDirPath=cc.path.join(t,"MazeMapOut"),jsb.fileUtils.isDirectoryExist(this._outDirPath)||jsb.fileUtils.createDirectory(this._outDirPath)},e.prototype.onLoad=function(){this.initDir();var t=this.loadAllMap();if(t)for(var e=0;e<t.length;e++){var o=t[e],i=new r.MZData(o);this.addScrollItem(i)}},e.prototype.loadAllMap=function(){for(var t=0,e=this.loadMapData(t),o=[];0!=e;)o.push(e),t++,e=this.loadMapData(t);return o},e.prototype.show=function(){if(!this.node.active){var t=this.node.getComponent(cc.Animation);t.off(cc.Animation.EventType.FINISHED),this.node.active=!0,t.play("in")}},e.prototype.hide=function(){var t=this;if(this.node.active){var e=this.node.getComponent(cc.Animation);e.off(cc.Animation.EventType.FINISHED),e.play("out"),e.on(cc.Animation.EventType.FINISHED,function(){t.node.active=!1})}},e.prototype.pageUp=function(){if(this.node.active){var t=Math.max(this.sc.content.height,this.sc.node.height)-this.sc.node.height;if(t>0)if(t<this.sc.node.height)this.sc.scrollToTop();else{var e=this.sc.node.height/t,o=(this.sc.content.y-this.sc.node.height/2)/t-e;o<=0?this.sc.scrollToTop():this.sc.scrollToPercentVertical(o)}}},e.prototype.pageDown=function(){if(this.node.active){var t=Math.max(this.sc.content.height,this.sc.node.height)-this.sc.node.height;if(t>0)if(t<this.sc.node.height)this.sc.scrollToBottom();else{var e=this.sc.node.height/t,o=(this.sc.content.y-this.sc.node.height/2)/t+e;o>=1?this.sc.scrollToBottom():this.sc.scrollToPercentVertical(o)}}},e.prototype.onBtnClick=function(t,e){this.showMap(e),this.hide()},e.prototype.addScrollItem=function(t){var e=this,o=cc.instantiate(this.cell),r=o.getComponent(n.default);return r.setData(t,this.sc.content.childrenCount,JSON.stringify(t.MzSize)),o.parent=this.sc.content,r.onClick(function(t){e.mainScene.getComponent(a.default).newMap(t),e.hide()}),r},e.prototype.showMap=function(t){var e=t.split("*"),o={h:parseInt(e[0]),l:parseInt(e[1])},i=cc.size(o.l*c.width,o.l*c.height),n=new r.MZData(i,o),s=this.addScrollItem(n);this.mainScene.getComponent(a.default).newMap(s)},e.prototype.formatMapPath=function(t){return cc.path.join(this._outDirPath,"map_"+t+".mazemap")},e.prototype.loadMapData=function(t){var e=this.formatMapPath(t);if(jsb.fileUtils.isFileExist(e)){var o=jsb.fileUtils.getDataFromFile(e);return i.MapProto.FormatedMzData.decode(o)}return console.error("Have no map data",t),!1},e.prototype.bulidConfig=function(){if(jsb)for(var t=0;t<this.sc.content.children.length;t++){var e=this.sc.content.children[t].getComponent(n.default).Data.formatMZData(),o=i.MapProto.FormatedMzData.create(e),r=i.MapProto.FormatedMzData.encode(o).finish(),a=this.formatMapPath(t);jsb.fileUtils.writeDataToFile(r,a),console.log("save map, OutPath: ",a)}else console.error("only build in native")},__decorate([p(cc.Prefab)],e.prototype,"cell",void 0),__decorate([p(cc.ScrollView)],e.prototype,"sc",void 0),__decorate([p(cc.Node)],e.prototype,"mainScene",void 0),e=__decorate([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../MazeMapProto":"MazeMapProto","./MZMapData":"MZMapData","./MainScene":"MainScene","./ScrollItem":"ScrollItem"}],ScrollItem:[function(t,e,o){"use strict";cc._RF.push(e,"319d7qf11tIA4bXiD5yCBRY","ScrollItem"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,n=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._data=null,e._index=null,e._clickCallBack=null,e.label=null,e.info=null,e}return __extends(e,t),Object.defineProperty(e.prototype,"Data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Index",{get:function(){return this._index},enumerable:!0,configurable:!0}),e.prototype.setData=function(t,e,o){this._data=t,this._index=e,this.label.string=e.toString(),this.info.string=o},e.prototype.onItemClick=function(){this._clickCallBack&&this._clickCallBack(this)},e.prototype.onClick=function(t){this._clickCallBack=t},__decorate([n(cc.Label)],e.prototype,"label",void 0),__decorate([n(cc.Label)],e.prototype,"info",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],SpriteSearchLight:[function(t,e,o){"use strict";cc._RF.push(e,"134e8Ssq01JMbLOdcclOrsb","SpriteSearchLight"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../scripts/Base/SpriteShaderBase"),i=cc._decorator,n=i.ccclass,a=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._mouse=cc.v2(0,0),e._radius=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"mouse",{get:function(){return this._mouse},set:function(t){this._mouse=t,this.Material&&this.Material.effect.setProperty("mouse",this._mouse)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=Math.min(Math.min(this.node.width,this.node.height),t),this.Material&&this.Material.effect.setProperty("radius",this._radius)},enumerable:!0,configurable:!0}),e.prototype.initUniformLocation=function(){var t=this;this.Material.effect.setProperty("resolution",cc.v2(this.node.width,this.node.height)),this.mouse=this._mouse,this.radius=this._radius,this.node.on(cc.Node.EventType.TOUCH_START,function(e){var o=t.node.convertToNodeSpaceAR(e.getLocation());t.mouse=o},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){var o=t.node.convertToNodeSpaceAR(e.getLocation());t.mouse=o},this)},e=__decorate([n],e)}(r.default));o.default=a,cc._RF.pop()},{"../../scripts/Base/SpriteShaderBase":"SpriteShaderBase"}],SpriteShaderBase:[function(t,e,o){"use strict";cc._RF.push(e,"7b4286kmcJDJJIMecv7Ovrw","SpriteShaderBase"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,n=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mat=null,e}return __extends(e,t),Object.defineProperty(e.prototype,"Sprite",{get:function(){return this.getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Material",{get:function(){if(this.Sprite)return this.Sprite.getMaterial(0)},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){this.init()},e.prototype.init=function(){this.Sprite.setMaterial(0,this.mat),this.initUniformLocation()},e.prototype.initUniformLocation=function(){},__decorate([n(cc.Material)],e.prototype,"mat",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],test:[function(t,e,o){"use strict";cc._RF.push(e,"77271zGo9xN/5UaGp2/rDj4","test"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,n=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return __extends(e,t),e.prototype.onLoad=function(){console.log("FFFFFFFFFFFFFFFFFF")},e.prototype.start=function(){},__decorate([n(cc.Label)],e.prototype,"label",void 0),__decorate([n],e.prototype,"text",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}]},{},["SpriteSearchLight","SpriteShaderBase","MZControl","MZMapData","MainScene","Menu","ScrollItem","Actor","FloorTile","GameController","MapCtrl","test","MazeMapProto"]);